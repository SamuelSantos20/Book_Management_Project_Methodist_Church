<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Registrar Empréstimo - Igreja Metodista</title>
	<link rel="stylesheet" href="/css/registro_emprestimo.css">
</head>

<body>
	<div class="container">
		<aside class="sidebar">
			<h2>Menu</h2>
			<nav>
				<ul>
					<li><a th:href="@{/www.com.metodista.gerenciamento.consultas}">Início</a></li>
					                    <li><a th:href="@{/www.com.metodista.gerenciamento.consultas/list/books}">Livros</a></li>
					                    <li><a th:href="@{/www.com.metodista.gerenciamento.consultas/list/person}">Usuários com Emprestimo </a></li>
					                    <li><a th:href="@{/www.com.metodista.gerenciamento.consultas/notificacoes}" th:text="'Notificações ' + '0' +${number}"></a></li>
					                    <li><a th:href="@{/www.com.metodista.gerenciamento.consultas/pre/loans/register/}">Empréstimo</a></li>
					                    <li><a th:href="@{/www.com.metodista.gerenciamento.consultas/lista/Emprestimos}">Lista de Empréstimos</a></li>
										<li><a th:href="@{/www.com.metodista.gerenciamento.consultas/pre/add-book}">Adicionar Livro</a></li>
				</ul>
			</nav>
		</aside>
		<main class="content">
			<div th:if="${successMessage}" class="alert alert-success" role="alert">
				<span th:text="${successMessage}"></span>
			</div>

			<div th:if="${errorMessage}" class="alert alert-danger" role="alert">
				<span th:text="${errorMessage}"></span>
			</div>

			<header class="header">
				<h1>Registrar Empréstimo</h1>
			</header>
			<div class="form-container">
				<form th:action=" ${loan.id == null} ?  @{/www.com.metodista.gerenciamento.consultas/loans/register/} : @{/www.com.metodista.gerenciamento.consultas/loans/upadte/Emprestimo}" th:object="${loan}"
					method="post">

					<!-- Dados do usuário -->
					<div class="form-row">
						<div class="form-group">
							<label for="nome">Nome</label>
							<input type="text" id="nome" th:field="*{person.name}" required>
						</div>
						<div class="form-group">
							<label for="cpf">CPF</label>
							<input type="text" id="cpf" th:field="*{person.cpf}" required>
						</div>
						<div class="form-group">
							<label for="telefone">Telefone</label>
							<input type="text" id="telefone" th:field="*{person.telefones[0].number}" required>
						</div>
					</div>

					<!-- Empréstimo e datas -->
					<div class="form-row">
						<div class="form-group">
							<label for="livro">Livro</label>
							<select id="livro" th:field="*{book.id}" required>
								<option value="">Escolha...</option>
								<option th:each="b : ${books}" th:value="${b.id}" th:text="${b.title}"></option>
							</select>
						</div>
						<div class="form-group">
							<label for="data-entrada">Data de Entrada</label>
							<input type="date" id="data-entrada" th:field="*{loanDate}" required>
						</div>
						<div class="form-group">
							<label for="data-devolucao">Data de Devolução</label>
							<input type="date" id="data-devolucao" th:field="*{returnDate}" required>
						</div>
					</div>

					<!-- Endereço -->
					<div class="form-row">
						<div class="form-group">
							<label for="rua">Rua</label>
							<input type="text" id="rua" th:field="*{person.address.street}" required>
						</div>
						<div class="form-group">
							<label for="numero">Número</label>
							<input type="text" id="numero" th:field="*{person.address.number}" required>
						</div>
						<div class="form-group">
							<label for="bairro">Bairro</label>
							<input type="text" id="bairro" th:field="*{person.address.neighborhood}" required>
						</div>
					</div>

					<!-- Complemento, Cidade e Estado -->
					<div class="form-row">
						<div class="form-group">
							<label for="complemento">Complemento</label>
							<input type="text" id="complemento" th:field="*{person.address.complement}">
						</div>
						<div class="form-group">
							<label for="cidade">Cidade</label>
							<input type="text" id="cidade" th:field="*{person.address.city}" required>
						</div>
						<div class="form-group">
							<label for="estado">Estado</label>
							<select id="estado" th:field="*{person.address.state}" required>
								<option value="">Escolha...</option>
								<option th:each="state : ${States}" th:value="${state}" th:text="${state}"></option>
							</select>
						</div>
					</div>

					<div class="form-row">
						<div class="form-group">
							<button type="submit" class="btn">Registrar</button>
						</div>
					</div>


				</form>
			</div>
		</main>
	</div>
</body>

</html>